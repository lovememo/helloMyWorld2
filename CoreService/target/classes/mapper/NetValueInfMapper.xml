<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 指定工作空间，要与接口名相同，源代码没有去看，猜测应该是通过"这里的namespace.下边方法的id"来定位方法的 -->
<mapper namespace="com.opm.core.investManager.mapper.NetValueAppMapper">
	<!-- MAPPING START -->
	<resultMap id="NetValueInfModel" type="com.opm.core.investManager.model.NetValueInfModel">
		<result column="plan_id" property="planId"></result>
		<result column="invest_id" property="investId"></result>
		<result column="evaluate_date" property="evaluateDate"></result>
		<result column="op_date" property="opDate"></result>
		<result column="unit_value" property="unitValue"></result>
		<result column="quotient" property="quotient"></result>
		<result column="net_amt" property="netAmt"></result>
		<result column="accept_date" property="acceptDate"></result>
		<result column="last_app_no" property="lastAppNo"></result>
	</resultMap>
	

	<!-- MAPPING END -->
	

	<!-- SELECT START -->
	<select id="qryInf" resultMap="NetValueInfModel" parameterType="com.opm.core.investManager.model.NetValueInfModel">
		SELECT plan_id,
		       invest_id,
		       evaluate_date,
		       op_date,
		       unit_value,
		       quotient,
		       net_amt,
		       accept_date,
		       last_app_no
		  FROM opm_net_value_inf
		 WHERE plan_id = #{planId}
		   AND invest_id = #{investId}
		   AND evaluate_date = #{evaluateDate}
	</select>
	
	<!-- SELECT END -->

	<!-- INSERT START -->
	<insert id="addInf" parameterType="com.opm.core.investManager.model.NetValueInfModel">
		INSERT INTO opm_net_value_inf
		    (plan_id,
		     invest_id,
		     evaluate_date,
		     op_date,
		     unit_value,
		     quotient,
		     net_amt,
		     accept_date,
		     last_app_no)
		VALUES
		    (#{planId},
		     #{investId},
		     #{evaluateDate},
		     #{opDate},
		     #{unitValue},
		     #{quotient},
		     #{netAmt},
		     #{acceptDate},
		     #{lastAppNo})
	</insert>
	
	<!-- INSERT END -->
	
	<!-- UPDATE START -->
	<update id="updInf" parameterType="com.opm.core.investManager.model.NetValueInfModel">
		UPDATE opm_net_value_inf
		<set>
			<if test="planId != null and planId != ''">
		   	   plan_id       = #{planId},
		   	</if>
		   	<if test="investId != null and investId != ''">
		       invest_id     = #{investId},
		    </if>
		    <if test="evaluateDate != null and evaluateDate != ''">
		       evaluate_date = #{evaluateDate},
		    </if>
		    <if test="opDate != null and opDate != ''">
		       op_date       = #{opDate},
		    </if>
		    <if test="unitValue != null and unitValue != ''">
		       unit_value    = #{unitValue},
		    </if>
		    <if test="quotient != null and quotient != ''">
		       quotient      = #{quotient},
		    </if>
		    <if test="netAmt != null and netAmt != ''">
		       net_amt       = #{netAmt},
		    </if>
		    <if test="acceptDate != null and acceptDate != ''">
		       accept_date   = #{acceptDate},
		    </if>
		    <if test="lastAppNo != null and lastAppNo != ''">
		       last_app_no   = #{lastAppNo}
		    </if>
		 </set>
		 WHERE plan_id = #{planId}
		   AND invest_id = #{investId}
		   AND evaluate_date = #{evaluateDate}
	</update>
	<!-- UPDATE END -->
</mapper>